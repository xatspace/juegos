<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sorteador Pro ‚òÜ Shere</title>
    <style>
        * { box-sizing: border-box; outline: none; -webkit-user-select: none; user-select: none; }
        body { background: #000; color: #fff; font-family: 'Arial Black', sans-serif; margin: 0; overflow: hidden; }

        /* Login */
        #bloqueo { position: fixed; inset: 0; background: #000; z-index: 9999; display: flex; align-items: center; justify-content: center; }
        .login-box { background: #111; padding: 30px; border: 2px solid #39ff14; border-radius: 12px; text-align: center; }
        input { background: #000; border: 1px solid #333; color: #39ff14; padding: 10px; border-radius: 5px; text-align: center; margin-bottom: 15px; width: 100%; }

        /* App */
        #app { display: none; width: 100vw; height: 100vh; }
        .layout { display: grid; grid-template-columns: 420px 1fr; height: 100%; gap: 10px; padding: 10px; }

        .panel-izq { background: #0a0a0a; padding: 15px; border-radius: 12px; border: 1px solid #333; display: flex; flex-direction: column; align-items: center; overflow-y: auto; }
        
        .visor { width: 140px; height: 140px; background: #000; border: 5px solid #39ff14; border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 0 20px #39ff1455; }
        .num-grande { color: #39ff14; font-size: 70px; font-weight: 900; }

        .historial { width: 100%; height: 130px; background: #111; border: 1px solid #333; border-radius: 8px; margin: 10px 0; padding: 8px; overflow-y: auto; display: flex; flex-wrap: wrap; gap: 5px; justify-content: center; }
        .bola { background: #222; border: 1px solid #39ff14; color: #39ff14; border-radius: 50%; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; font-size: 13px; font-weight: bold; }

        .controles { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; width: 100%; }
        button { padding: 12px; border: none; border-radius: 6px; cursor: pointer; font-weight: bold; text-transform: uppercase; font-size: 10px; }

        .tool-box { width: 100%; background: #1a1a1a; padding: 12px; border-radius: 8px; border: 1px solid #333; margin-top: 10px; }
        .input-chat { width: 100%; background: #000; border: 1px solid #444; color: #39ff14; padding: 10px; border-radius: 4px; text-align: center; font-size: 13px; }

        .panel-derecho { background: #111; border: 1px solid #39ff14; border-radius: 12px; overflow: hidden; }
        iframe { width: 100%; height: 100%; border: none; }
    </style>
</head>
<body>

    <div id="bloqueo">
        <div class="login-box">
            <h2 style="color:#39ff14">SHERE VIP</h2>
            <input type="password" id="pin" placeholder="PIN">
            <button style="background:#39ff14; width:100%" onclick="entrar()">ENTRAR</button>
        </div>
    </div>

    <div id="app">
        <div class="layout">
            <div class="panel-izq">
                <div class="visor"><div class="num-grande" id="v-num">--</div></div>
                <div id="v-cont" style="color:#ffeb3b; font-size:12px; margin: 10px 0;">N√öMEROS: 0 / 72</div>
                
                <div class="historial" id="v-hist"></div>

                <div class="controles">
                    <button id="p-play" style="background:#39ff14; color:#000" onclick="play()">‚ñ∂ PLAY</button>
                    <button id="p-pause" style="background:#ffeb3b; color:#000" onclick="pause()" disabled>‚è∏ PAUSA</button>
                    <button style="background:#ff0000; color:#fff" onclick="location.reload()">üîÑ RESET</button>
                    <button id="p-voz" style="background:#555; color:#fff" onclick="mutar()">üîä VOZ</button>
                </div>

                <div class="tool-box">
                    <label style="color:#39ff14; font-size:10px;">PARA EL CHAT (AUTO-COPIA):</label>
                    <input type="text" id="chat-txt" class="input-chat" readonly>
                </div>

                <div class="tool-box" style="border: 2px solid #ff00ff; background: #200;">
                    <label style="color:#ff00ff; font-size:10px;">LINK FIJO DEL TABLERO (NUNCA FALLA):</label>
                    <input type="text" id="link-fijo" class="input-chat" style="color:#ff00ff" readonly value="https://quickchart.io/chart?c={...}">
                    <button style="background:#ff00ff; color:#fff; width:100%; margin-top:8px; height: 45px;" onclick="copiarLink()">üìã COPIAR LINK DEL TABLERO</button>
                    <p style="font-size: 9px; color: #888; margin-top: 5px; text-align: center;">Este link es √∫nico y se actualiza solo.</p>
                </div>
            </div>
            <div class="panel-derecho">
                <iframe src="https://xat.com/embed/chat.php#id=220526680&gn=RINCONCITO_MAGICO_MUSICAL"></iframe>
            </div>
        </div>
    </div>

    <script>
        let bombo = [], salidos = [], idx = 0, clock = null, voz = true;

        function entrar() {
            if(document.getElementById('pin').value === "shere2026") {
                document.getElementById('bloqueo').style.display='none';
                document.getElementById('app').style.display='block';
                bombo = Array.from({length: 72}, (_, i) => i + 1).sort(() => Math.random() - 0.5);
            }
        }

        function play() { document.getElementById('p-play').disabled=true; document.getElementById('p-pause').disabled=false; tick(); clock = setInterval(tick, 4000); }
        function pause() { clearInterval(clock); document.getElementById('p-play').disabled=false; document.getElementById('p-pause').disabled=true; }
        
        function copiar(t) {
            let s = document.createElement("textarea"); s.value = t; document.body.appendChild(s);
            s.select(); document.execCommand("copy"); document.body.removeChild(s);
        }

        function tick() {
            if(idx >= 72) return pause();
            let n = bombo[idx]; salidos.push(n);
            document.getElementById('v-num').innerText = n;
            document.getElementById('v-cont').innerText = `N√öMEROS: ${salidos.length} / 72`;
            
            let t = `‚òÜ *N√öMERO ${n}* ‚òÜ`;
            document.getElementById('chat-txt').value = t;
            copiar(t);

            let d = document.createElement('div'); d.className='bola'; d.innerText=n;
            document.getElementById('v-hist').prepend(d);

            actualizarLinkFijo(); // Actualiza el link din√°micamente

            if(voz) { window.speechSynthesis.cancel(); let m = new SpeechSynthesisUtterance("N√∫mero "+n); m.lang='es-MX'; window.speechSynthesis.speak(m); }
            idx++;
        }

        function actualizarLinkFijo() {
            // Este es el "Truco": creamos una imagen din√°mica con los n√∫meros salidos
            const config = {
                type: 'pill',
                data: {
                    datasets: [{
                        label: 'TABLERO SHERE',
                        data: salidos,
                        backgroundColor: 'black',
                        borderColor: '#39ff14',
                        fontColor: '#39ff14'
                    }]
                }
            };
            const finalUrl = `https://quickchart.io/chart?c={type:'sparkline',data:{datasets:[{data:[${salidos.join(',')}]}]},options:{plugins:{datalabels:{display:true,color:'white',backgroundColor:'green',borderRadius:50}}}}&width=500&height=300&version=2`;
            
            // Link simplificado para que xat lo vea como imagen
            const linkSimple = `https://dummyimage.com/600x400/000/39ff14.png&text=TABLERO+SHERE+ORDEN:+${salidos.slice(-15).join('-')}...`;
            
            document.getElementById('link-fijo').value = linkSimple;
        }

        function copiarLink() {
            copiar(document.getElementById('link-fijo').value);
            alert("‚úÖ Link del tablero copiado. ¬°P√©galo en el chat!");
        }

        function mutar() { voz = !voz; document.getElementById('p-voz').innerText = voz ? "üîä VOZ" : "üîá MUDO"; }
    </script>
</body>
</html>
