<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Sorteador Pro ‚òÜ Shere</title>
    <style>
        * { -webkit-touch-callout: none; -webkit-user-select: none; user-select: none; outline: none; box-sizing: border-box; }
        body { background: #000; color: #fff; font-family: 'Arial Black', sans-serif; margin: 0; overflow: hidden; }

        /* Login */
        #bloqueo-seguridad { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 9999; display: flex; align-items: center; justify-content: center; }
        .login-box { background: #111; padding: 30px; border: 2px solid #39ff14; border-radius: 12px; text-align: center; box-shadow: 0 0 20px #39ff14; }
        .login-box input { background: #000; border: 1px solid #333; color: #39ff14; padding: 10px; border-radius: 5px; text-align: center; font-size: 16px; margin-bottom: 15px; width: 100%; }
        .login-box button { background: #39ff14; color: #000; border: none; padding: 10px 20px; border-radius: 5px; font-weight: bold; cursor: pointer; }

        /* App Layout */
        #contenido-protegido { display: none; width: 100vw; height: 100vh; }
        .layout-horizontal { display: grid; grid-template-columns: 420px 1fr; height: 100%; gap: 10px; padding: 10px; }

        /* Panel Izquierdo */
        .loteria-section { background: #0a0a0a; padding: 15px; border-radius: 12px; border: 1px solid #333; display: flex; flex-direction: column; align-items: center; overflow-y: auto; }
        
        .visor { width: 140px; height: 140px; background: #000; border: 5px solid #39ff14; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-bottom: 10px; box-shadow: 0 0 15px rgba(57,255,20,0.3); }
        .numero-grande { color: #39ff14; font-size: 70px; font-weight: 900; }

        .historial { width: 100%; height: 120px; background: #111; border: 1px solid #333; border-radius: 8px; margin: 10px 0; padding: 8px; overflow-y: auto; display: flex; flex-wrap: wrap; gap: 5px; justify-content: center; }
        .item-historial { background: #222; border: 1px solid #39ff14; color: #39ff14; border-radius: 50%; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; font-size: 12px; font-weight: bold; }

        .controles { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; width: 100%; }
        button { padding: 12px; border: none; border-radius: 6px; cursor: pointer; font-weight: bold; text-transform: uppercase; font-size: 10px; }

        .tool-box { width: 100%; background: #1a1a1a; padding: 12px; border-radius: 8px; border: 1px solid #333; margin-top: 10px; }
        .tool-box label { display: block; color: #39ff14; font-size: 10px; margin-bottom: 5px; }
        .input-chat { width: 100%; background: #000; border: 1px solid #444; color: #39ff14; padding: 10px; border-radius: 4px; text-align: center; font-size: 13px; }

        /* Chat */
        .chat-section { background: #111; border: 1px solid #39ff14; border-radius: 12px; overflow: hidden; }
        iframe { width: 100%; height: 100%; border: none; }
    </style>
</head>
<body>

    <div id="bloqueo-seguridad">
        <div class="login-box">
            <h2 style="color:#39ff14">CONTROL SHERE</h2>
            <input type="password" id="pin-acceso" placeholder="PIN">
            <button onclick="verificar()">ENTRAR</button>
        </div>
    </div>

    <div id="contenido-protegido">
        <div class="layout-horizontal">
            <div class="loteria-section">
                <div class="visor"><div class="numero-grande" id="num-v">--</div></div>
                <div id="cont-v" style="color:#ffeb3b; font-size:11px;">SALIERON: 0 / 72</div>
                
                <div class="historial" id="lista-h"></div>

                <div class="controles">
                    <button id="btn-play" style="background:#39ff14; color:#000" onclick="iniciar()">‚ñ∂ Play</button>
                    <button id="btn-pause" style="background:#ffeb3b; color:#000" onclick="pausar()" disabled>‚è∏ Pausa</button>
                    <button style="background:#ff0000; color:#fff" onclick="location.reload()">üîÑ Reset</button>
                    <button id="btn-audio" style="background:#555; color:#fff" onclick="toggleAudio()">üîä Audio</button>
                </div>

                <div class="tool-box">
                    <label>N√öMERO ACTUAL (AUTO-COPIA):</label>
                    <input type="text" id="txt-num" class="input-chat" readonly>
                </div>

                <div class="tool-box" style="border: 2px solid #ff00ff;">
                    <label style="color:#ff00ff">COMPARTIR TABLERO (LINK):</label>
                    <input type="text" id="txt-link" class="input-chat" style="color:#ff00ff" readonly placeholder="Esperando n√∫meros...">
                    <button style="background:#ff00ff; color:#fff; width:100%; margin-top:8px;" onclick="generarLink()">üìã GENERAR LINK TABLERO</button>
                </div>
            </div>

            <div class="chat-section">
                <iframe src="https://xat.com/embed/chat.php#id=220526680&gn=RINCONCITO_MAGICO_MUSICAL"></iframe>
            </div>
        </div>
    </div>

    <script>
        let bombo = [], salidos = [], indice = 0, timer = null, audio = true;

        function verificar() {
            if(document.getElementById('pin-acceso').value === "shere2026") {
                document.getElementById('bloqueo-seguridad').style.display='none';
                document.getElementById('contenido-protegido').style.display='block';
                preparar();
            } else { alert("Error"); }
        }

        function preparar() {
            bombo = Array.from({length: 72}, (_, i) => i + 1).sort(() => Math.random() - 0.5);
        }

        function iniciar() {
            document.getElementById('btn-play').disabled = true;
            document.getElementById('btn-pause').disabled = false;
            sacar();
            timer = setInterval(sacar, 4000);
        }

        function pausar() {
            clearInterval(timer);
            document.getElementById('btn-play').disabled = false;
            document.getElementById('btn-pause').disabled = true;
        }

        function copiar(t) {
            const el = document.createElement('textarea');
            el.value = t; document.body.appendChild(el);
            el.select(); document.execCommand('copy');
            document.body.removeChild(el);
        }

        function sacar() {
            if(indice >= 72) return pausar();
            let n = bombo[indice];
            salidos.push(n);
            document.getElementById('num-v').innerText = n;
            document.getElementById('cont-v').innerText = `SALIERON: ${salidos.length} / 72`;
            
            // Texto para chat
            let txt = `‚òÜ *N√öMERO ${n}* ‚òÜ`;
            document.getElementById('txt-num').value = txt;
            copiar(txt);

            // Historial visual
            let item = document.createElement('div');
            item.className = 'item-historial'; item.innerText = n;
            document.getElementById('lista-h').prepend(item);

            if(audio) {
                window.speechSynthesis.cancel();
                let m = new SpeechSynthesisUtterance("N√∫mero " + n);
                m.lang = 'es-ES'; window.speechSynthesis.speak(m);
            }
            indice++;
        }

        function generarLink() {
            if(salidos.length === 0) return alert("Saca n√∫meros");
            // Generamos un link que usa un visor de im√°genes online con los n√∫meros
            const base = "https://textoverimage.com/draw?text=";
            const data = "ORDEN: " + salidos.join("-");
            const link = base + encodeURIComponent(data) + "&bgcolor=000000&textcolor=39ff14";
            
            document.getElementById('txt-link').value = link;
            copiar(link);
            alert("‚úÖ LINK COPIADO AL PORTAPAPELES");
        }

        function toggleAudio() {
            audio = !audio;
            document.getElementById('btn-audio').innerText = audio ? "üîä Audio" : "üîá Mudo";
        }
    </script>
</body>
</html>
